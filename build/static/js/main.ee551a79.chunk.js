(this["webpackJsonpphone-book"]=this["webpackJsonpphone-book"]||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),u=n(15),r=n.n(u),l=(n(21),n(3)),o=n(2),s=n.n(o),i="/api/persons",m=function(e){var t=e.filterValue,n=e.setFilterValue;return c.a.createElement("section",null,c.a.createElement("label",null,"Filter contacts with: "),c.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}}))},f=n(4),d=n(5),p=function(e){var t=e.contacts,n=e.setContacts,a=e.contact,u=e.setContact,r=e.setStatusData,l=function(e){var t=e.target.name,n=e.target.value;u(Object(d.a)(Object(d.a)({},a),{},Object(f.a)({},t,n)))};return c.a.createElement("section",null,c.a.createElement("h2",null,"Add a new Contact"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var c,l,o=t.find((function(e){return e.name===a.name||e.number===a.number}));if(void 0!==o)return o.number!==a.number?window.confirm("Your contact ".concat(a.name," already exists, update the old number to a new one?"))?(c=o.id,l=a,s.a.put("".concat(i,"/").concat(c),l)).then((function(e){n(t.map((function(t){return t.id===e.data.id?e.data:t}))),r({text:"".concat(e.data.name," updated successfully"),type:"success"}),setTimeout((function(){r(null)}),2e3),u({name:"",number:""})})).catch((function(e){r({text:e.response.data.message,type:"error"}),setTimeout((function(){r(null)}),5e3)})):null:(r({text:"A contact ".concat(o.name," with the number ").concat(o.number," already exists"),type:"error"}),void setTimeout((function(){r(null)}),2e3));(function(e){return s.a.post(i,e)})(a).then((function(e){n(t.concat(e.data)),u({name:"",number:""}),r({text:"".concat(e.data.name," added successfully"),type:"success"}),setTimeout((function(){r(null)}),2e3)})).catch((function(e){r({text:e.response.data.message,type:"error"}),setTimeout((function(){r(null)}),5e3)}))}},c.a.createElement("div",null,c.a.createElement("label",null,"Name: "),c.a.createElement("input",{type:"text",name:"name",onChange:l,value:a.name,required:!0})),c.a.createElement("div",null,c.a.createElement("label",null,"Number: "),c.a.createElement("input",{type:"tel",name:"number",onChange:l,value:a.number,required:!0})),c.a.createElement("div",null,c.a.createElement("input",{type:"submit",value:"Add"}))))},b=function(e){var t=e.contactsToShow,n=e.filterValue,a=e.handleContactDelete;return c.a.createElement("section",null,c.a.createElement("h2",null,"Contacts"),t.length<1?""===n?c.a.createElement("em",null,"Your Phone book is empty, please add contacts."):c.a.createElement("em",null,"No contact is matching your search"):t.map((function(e){return c.a.createElement("p",{key:e.id},c.a.createElement("i",null,"Name : ",e.name," ")," ",c.a.createElement("span",null," | Number : ",e.number," ")," ",c.a.createElement("button",{onClick:function(){return a(e)}},"DELETE"))})))},E=function(e){var t=e.statusData;return null===t?null:c.a.createElement("p",{className:"error"===t.type?"error-blck":"success-blck"},c.a.createElement("em",null,t.text))};var h=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],u=t[1],r=Object(a.useState)({name:"",number:""}),o=Object(l.a)(r,2),f=o[0],d=o[1],h=Object(a.useState)(""),v=Object(l.a)(h,2),y=v[0],g=v[1],C=Object(a.useState)(null),x=Object(l.a)(C,2),j=x[0],w=x[1];return Object(a.useEffect)((function(){s.a.get(i).then((function(e){u(e.data)})).catch((function(e){w({text:e.response.data.message,type:"error"}),setTimeout((function(){w(null)}),5e3)}))}),[]),c.a.createElement("main",null,c.a.createElement("h1",null,"Phone Book"),c.a.createElement(m,{filterValue:y,setFilterValue:g}),c.a.createElement(E,{statusData:j}),c.a.createElement(p,{contacts:n,setContacts:u,contact:f,setContact:d,setStatusData:w}),c.a.createElement(b,{contactsToShow:function(){if(""===y)return n;var e=y.toUpperCase();return n.filter((function(t){return t.name.toUpperCase().includes(e)||t.number.includes(e)}))}(),filterValue:y,handleContactDelete:function(e){var t=e.name,a=e.id;return window.confirm("delete ".concat(t," from contacts?"))?function(e){return s.a.delete("".concat(i,"/").concat(e))}(a).then((function(){u(n.filter((function(e){return e.id!==a}))),w({text:"".concat(t," deleted successfully"),type:"success"}),setTimeout((function(){w(null)}),2e3)})).catch((function(e){w({text:e.response.data.message,type:"error"}),setTimeout((function(){w(null)}),5e3)})):void 0}}))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(h,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.ee551a79.chunk.js.map